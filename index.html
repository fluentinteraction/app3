<script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    let code = sessionStorage.getItem('userCode');
    console.log('Initial userCode:', code); // Debug log

    if (code && code !== 'Undefined') {
        gtag('config', 'G-NYJFTSXW0K', {
            'user_id': code,
            'send_page_view': true,  // Enable page view tracking
            'debug_mode': true       // Enable debug mode
        });
        console.log('GA4 config with user_id:', code); // Debug log
    } else {
        gtag('config', 'G-NYJFTSXW0K', {
            'send_page_view': true,  // Enable page view tracking
            'debug_mode': true       // Enable debug mode
        });
        console.log('GA4 config without user_id'); // Debug log
    }
</script>
